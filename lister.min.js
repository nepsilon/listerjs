(function(){var e,t=this;e=function(){function e(t){var n=this;this.el=t;this.makeList=function(t){return e.prototype.makeList.apply(n,arguments)};console.log(this.el);this.el.addEventListener("keyup",this.makeList,false)}e.prototype.makeList=function(e){var t,n,r,i,s,o,u,a;s=this.el.value.split("\n");a=this.getCurrentLineNb(s)-1;if(!(a>=0)){a=0}if(e.keyCode===13){r=this.el.selectionStart;o=/^(\s*)([-*]|\d+)(\s+)[\S ]+$/g.exec(s[a]);if(o){i=parseInt(o[2]);if(i){t=""+o[1]+(i+1)+o[3]}else{t=""+o[1]+o[2]+o[3]}s[a+1]=t;this.el.value=s.join("\n");u=r+t.length;return this.el.setSelectionRange(u,u)}else if(s[a].match(/^\s*([-*]|\d+)\s+$/g)){n=s[a].length;s[a]="";this.el.value=s.join("\n");u=r-n;return this.el.setSelectionRange(u,u)}}};e.prototype.getCurrentLineNb=function(e){var t,n,r,i;t=this.el.selectionStart;r=0;n=e[0].length+1;while(t>=n){r+=1;n+=((i=e[r])!=null?i.length:void 0)+1}return r};return e}();window.Lister=e}).call(this)
